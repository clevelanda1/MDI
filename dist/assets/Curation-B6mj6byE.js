import{c as S,h as v,F as H,q as e,t as m,A,X as _,E as V,R as W}from"./index-8wLK5tP2.js";import{P as F,G as Q,L as X,B as Y}from"./Button-B956L8VM.js";import{L as $,H as O,F as J}from"./likedProductsService-C4af-cqr.js";import{E as K}from"./eye-off-CCGDSEKR.js";import{E as Z}from"./eye-MYrhNOcT.js";import{S as ee}from"./search-h4tSjVuG.js";import{S as se}from"./star-C1wr8eot.js";import"./apiUsageService-40l3Zyjx.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=S("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=S("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=S("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),ae=()=>{const[t,c]=v.useState({projectId:"",projectName:"",detectedElements:[],searchQueries:{amazon:[],etsy:[]},preLoadedProducts:[]}),[i,l]=v.useState([]),[r,d]=v.useState(!0),[x,u]=v.useState(!1);v.useEffect(()=>{const s=new URLSearchParams(window.location.search).get("project");s?b(s):d(!1)},[]);const b=async a=>{try{d(!0),console.log("Loading project data for:",a);const s=await F.getProjectWithProductsData(a);if(s){const{project:f,elements:N,products:R,searchQueries:o}=s;console.log("Project loaded:",f.name),console.log("Elements found:",N.length),console.log("Pre-loaded products:",R.length),console.log("Search queries:",o);const n=N.map(p=>p.name);c({projectId:f.id,projectName:f.name,detectedElements:n,searchQueries:o,preLoadedProducts:R});const h=await F.getElementsWithProducts(a);l(h),console.log("Elements with products:",h)}else console.error("Project not found:",a)}catch(s){console.error("Error loading project data:",s)}finally{d(!1)}};return{projectData:t,elementsWithProducts:i,isLoadingProject:r,isRefreshing:x,refreshProducts:async()=>{if(!t.projectId)return[];try{u(!0),console.log("Refreshing products for project:",t.projectId);const a=await F.refreshProjectProducts(t.projectId);console.log("Products refreshed:",a.length);const s=await F.getElementsWithProducts(t.projectId);return l(s),c(f=>({...f,preLoadedProducts:a})),a}catch(a){return console.error("Error refreshing products:",a),[]}finally{u(!1)}},refreshElementProducts:async a=>{try{console.log("Refreshing products for element:",a);const s=await F.refreshElementProducts(a);return l(f=>f.map(N=>N.id===a?{...N,products:s}:N)),c(f=>({...f,preLoadedProducts:[...f.preLoadedProducts.filter(N=>N.elementId!==a),...s]})),s}catch(s){return console.error(`Error refreshing products for element ${a}:`,s),[]}}}},ie=(t,c,i)=>{const[l,r]=v.useState({selectedElements:[],selectedPriceRange:[],searchTerm:"",showFavoritesOnly:!1,marketplaces:void 0});v.useEffect(()=>{c.length>0&&l.selectedElements.length===0&&r(o=>({...o,selectedElements:c}))},[c]);const d=v.useMemo(()=>t.filter(o=>{const n=l.selectedElements.length===0||l.selectedElements.some(C=>{const y=C.toLowerCase(),w=o.title.toLowerCase(),P=y.endsWith("s")?y.slice(0,-1):y;return w.includes(y)||w.includes(P)}),h=l.selectedPriceRange.length===0||l.selectedPriceRange.some(C=>{const y=H.find(w=>w.min===C);return y&&o.price>=y.min&&o.price<=y.max}),p=!l.searchTerm||o.title.toLowerCase().includes(l.searchTerm.toLowerCase()),L=!l.showFavoritesOnly||i.includes(o.id),k=!l.marketplaces||l.marketplaces.length===0||l.marketplaces.includes(o.source);return n&&h&&p&&L&&k}),[t,l,i]),x=v.useMemo(()=>{const o=t.filter(h=>{const p=l.selectedElements.length===0||l.selectedElements.some(y=>{const w=y.toLowerCase(),P=h.title.toLowerCase(),z=w.endsWith("s")?w.slice(0,-1):w;return P.includes(w)||P.includes(z)}),L=l.selectedPriceRange.length===0||l.selectedPriceRange.some(y=>{const w=H.find(P=>P.min===y);return w&&h.price>=w.min&&h.price<=w.max}),k=!l.searchTerm||h.title.toLowerCase().includes(l.searchTerm.toLowerCase()),C=!l.showFavoritesOnly||i.includes(h.id);return p&&L&&k&&C}),n={};return o.forEach(h=>{n[h.source]||(n[h.source]=0),n[h.source]++}),Object.entries(n).map(([h,p])=>({id:h,name:h.charAt(0).toUpperCase()+h.slice(1),count:p})).filter(h=>h.count>0).sort((h,p)=>p.count-h.count)},[t,l.selectedElements,l.selectedPriceRange,l.searchTerm,l.showFavoritesOnly,i]),u=o=>{r(n=>({...n,searchTerm:o}))},b=o=>{r(n=>({...n,selectedElements:o}))},g=o=>{r(n=>({...n,selectedElements:n.selectedElements.includes(o)?n.selectedElements.filter(h=>h!==o):[...n.selectedElements,o]}))},j=o=>{r(n=>({...n,selectedPriceRange:o}))},a=o=>{r(n=>({...n,selectedPriceRange:n.selectedPriceRange.includes(o)?n.selectedPriceRange.filter(h=>h!==o):[...n.selectedPriceRange,o]}))},s=o=>{r(n=>({...n,showFavoritesOnly:o}))},f=o=>{r(n=>{if(!n.marketplaces){const h=x.map(p=>p.id);return{...n,marketplaces:h.filter(p=>p!==o)}}if(n.marketplaces.includes(o)){const h=n.marketplaces.filter(p=>p!==o);return{...n,marketplaces:h.length===0?void 0:h}}return{...n,marketplaces:[...n.marketplaces,o]}})},N=()=>{r({selectedElements:[],selectedPriceRange:[],searchTerm:"",showFavoritesOnly:!1,marketplaces:void 0})},R=l.selectedElements.length>0||l.selectedPriceRange.length>0||l.searchTerm||l.showFavoritesOnly||l.marketplaces&&l.marketplaces.length>0;return{filters:l,filteredProducts:d,hasActiveFilters:R,availableMarketplaces:x,updateSearchTerm:u,updateSelectedElements:b,toggleElement:g,updatePriceRange:j,togglePriceRange:a,updateShowFavoritesOnly:s,toggleMarketplace:f,clearAllFilters:N}},oe=t=>{const[c,i]=v.useState({wishlist:[],isLoading:!1});v.useEffect(()=>{t&&l()},[t]);const l=async()=>{if(t)try{i(u=>({...u,isLoading:!0}));const x=(await $.getLikedProductsForProject(t)).map(u=>u.asin);i({wishlist:x,isLoading:!1})}catch(d){console.error("Error loading liked products status:",d),i(x=>({...x,isLoading:!1}))}},r=async d=>{if(t)try{c.wishlist.includes(d.id)?(await $.unlikeProduct(t,d.id),i(u=>({...u,wishlist:u.wishlist.filter(b=>b!==d.id)})),console.log("Product unliked:",d.title)):(await $.likeProduct(t,d),i(u=>({...u,wishlist:[...u.wishlist,d.id]})),console.log("Product liked:",d.title))}catch(x){console.error("Error toggling wishlist:",x)}};return{wishlist:c.wishlist,isLoadingWishlist:c.isLoading,toggleWishlist:r,loadLikedProductsStatus:l}},T=24,ne=t=>{const[c,i]=v.useState(1);v.useEffect(()=>{i(1)},[t]);const l=v.useMemo(()=>{const g=Math.ceil(t/T);return{currentPage:c,totalPages:g,totalProducts:t,productsPerPage:T}},[c,t]),r=g=>{const j=(c-1)*T,a=j+T;return g.slice(j,a)},d=()=>{const g=[];if(l.totalPages<=5)for(let a=1;a<=l.totalPages;a++)g.push(a);else{const a=Math.max(1,c-2),s=Math.min(l.totalPages,a+5-1);a>1&&(g.push(1),a>2&&g.push("..."));for(let f=a;f<=s;f++)g.push(f);s<l.totalPages&&(s<l.totalPages-1&&g.push("..."),g.push(l.totalPages))}return g},x=g=>{i(g);const j=document.querySelector("[data-products-section]");j&&j.scrollIntoView({behavior:"smooth",block:"start"})},u=c<l.totalPages,b=c>1;return{paginationState:l,getCurrentPageProducts:r,getPageNumbers:d,handlePageChange:x,canGoNext:u,canGoPrevious:b}},ce=({projectName:t})=>{const c={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.22,1,.36,1]}}};return e.jsxs(m.div,{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 text-white py-16 lg:py-20 relative overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"hero-dots",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:e.jsx("circle",{cx:"30",cy:"30",r:"2",fill:"currentColor"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#hero-dots)",className:"text-white"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 relative z-10",children:e.jsxs(m.div,{className:"max-w-4xl",variants:c,initial:"hidden",animate:"visible",children:[e.jsx(m.div,{variants:i,className:"flex mb-8",children:e.jsxs("a",{href:"/studio",className:"inline-flex items-center text-slate-300 hover:text-white transition-all duration-300 font-medium group bg-white/10 backdrop-blur-sm px-5 py-3 rounded-full hover:bg-white/20",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"text-sm",children:"Back to Studio"})]})}),e.jsx(m.div,{variants:i,className:"w-16 h-1 bg-gradient-to-r from-violet-400 to-blue-400 mb-6 rounded-full"}),e.jsx(m.h1,{variants:i,className:"font-light text-4xl md:text-5xl lg:text-6xl mb-6 leading-tight",children:t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-semibold",children:t}),e.jsx("span",{className:"block font-light",children:"Product Selections"})]}):e.jsxs(e.Fragment,{children:["Curated",e.jsx("span",{className:"block font-semibold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:"Selections"})]})}),e.jsx(m.p,{variants:i,className:"text-xl text-slate-300 leading-relaxed max-w-3xl font-light",children:"Discover a curated selection of premium furniture and décor from Amazon and Etsy, tailored to your space and style preference."})]})})]})},de=({totalProducts:t,currentPage:c,totalPages:i,hasActiveFilters:l,viewSettings:r,isRefreshing:d,onClearFilters:x,onToggleFilters:u,onRefreshProducts:b,onViewModeChange:g})=>e.jsx("div",{className:"bg-white/90 backdrop-blur-xl border-b border-slate-200/60 relative z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:[t," products found",t>24?` • Page ${c} of ${i}`:""]}),l&&e.jsx(m.button,{onClick:x,className:"text-sm text-slate-500 hover:text-slate-700 font-medium px-3 py-1.5 rounded-full hover:bg-slate-100/60 transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Clear filters"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(m.button,{onClick:u,className:"flex items-center space-x-2 px-4 py-2.5 border border-slate-300/60 rounded-2xl text-slate-600 hover:bg-slate-50/80 transition-all duration-300 bg-white/60 backdrop-blur-sm",whileHover:{scale:1.02},whileTap:{scale:.98},title:r.showFilters?"Hide filters":"Show filters",children:[r.showFilters?e.jsx(K,{size:16}):e.jsx(Z,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:r.showFilters?"Hide Filters":"Show Filters"})]}),e.jsxs(m.button,{onClick:u,className:"lg:hidden flex items-center space-x-2 px-4 py-2.5 border border-slate-300/60 rounded-2xl text-slate-600 hover:bg-slate-50/80 transition-all duration-300 bg-white/60 backdrop-blur-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(re,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Filters"})]}),e.jsxs("div",{className:"flex border border-slate-300/60 rounded-2xl overflow-hidden bg-white/60 backdrop-blur-sm",children:[e.jsx(m.button,{onClick:()=>g("grid"),className:`p-2.5 transition-all duration-300 ${r.viewMode==="grid"?"bg-slate-100/80 text-slate-900":"text-slate-600 hover:bg-slate-50/60"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Q,{size:16})}),e.jsx(m.button,{onClick:()=>g("list"),className:`p-2.5 border-l border-slate-300/60 transition-all duration-300 ${r.viewMode==="list"?"bg-slate-100/80 text-slate-900":"text-slate-600 hover:bg-slate-50/60"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(X,{size:16})})]})]})]})})}),he=({filters:t,detectedElements:c,wishlistCount:i,isVisible:l,availableMarketplaces:r,onSearchChange:d,onToggleElement:x,onTogglePriceRange:u,onToggleFavoritesOnly:b,onToggleMarketplace:g})=>{const j={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.22,1,.36,1]}}},a=s=>s==="amazon"?"orange":"teal";return e.jsx(A,{children:l&&e.jsx(m.div,{className:"lg:col-span-1",variants:j,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-900/5 hover:shadow-2xl hover:shadow-slate-900/10 transition-all duration-500",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("h2",{className:"font-semibold text-2xl text-slate-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-violet-500 rounded-full"}),"Filters"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"font-semibold text-lg text-slate-900 mb-4 flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Search Products"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by product name...",value:t.searchTerm,onChange:s=>d(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300/60 rounded-2xl focus:outline-none focus:ring-2 focus:ring-violet-500/50 focus:border-violet-500 bg-white/60 backdrop-blur-sm transition-all duration-300 text-sm"}),e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),t.searchTerm&&e.jsx(m.button,{onClick:()=>d(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(_,{size:16})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"font-semibold text-lg text-slate-900 mb-4 flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Favorites"]}),e.jsxs(m.label,{className:"flex items-center group cursor-pointer p-3 rounded-xl hover:bg-slate-50/60 transition-all duration-200",whileHover:{x:2},children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-red-600 rounded border-slate-300 focus:ring-red-500",checked:t.showFavoritesOnly,onChange:s=>b(s.target.checked)}),e.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[e.jsx(O,{size:16,className:`${t.showFavoritesOnly?"text-red-500 fill-red-500":"text-slate-400"} transition-colors`}),e.jsx("span",{className:"text-slate-700 group-hover:text-slate-900 transition-colors font-medium",children:"Show Favorites"}),i>0&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-medium",children:i})]})]})]}),r.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"font-semibold text-lg text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Marketplace"]}),e.jsx("div",{className:"space-y-3",children:r.map(s=>e.jsxs(m.label,{className:"flex items-center group cursor-pointer p-3 rounded-lg hover:bg-white/60 transition-all duration-200",whileHover:{x:2},children:[e.jsx("input",{type:"checkbox",className:`form-checkbox h-5 w-5 text-${a(s.id)}-600 rounded border-slate-300 focus:ring-${a(s.id)}-500`,checked:!t.marketplaces||t.marketplaces.includes(s.id),onChange:()=>g(s.id)}),e.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-700 group-hover:text-slate-900 transition-colors font-medium",children:s.name}),e.jsx("span",{className:`text-xs bg-${a(s.id)}-100 text-${a(s.id)}-700 px-2 py-1 rounded-full font-medium`,children:s.count})]})]},s.id))})]}),c.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"font-semibold text-lg text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Detected Items"]}),e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsxs(m.label,{className:"flex items-center group cursor-pointer p-3 rounded-xl hover:bg-slate-50/60 transition-all duration-200",whileHover:{x:2},children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-violet-600 rounded border-slate-300 focus:ring-violet-500",checked:t.selectedElements.includes(s),onChange:()=>x(s)}),e.jsx("span",{className:"ml-4 text-slate-700 group-hover:text-slate-900 transition-colors font-medium",children:s})]},s))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"font-semibold text-lg text-slate-900 mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Price Range"]}),e.jsx("div",{className:"space-y-3",children:H.map(s=>e.jsxs(m.label,{className:"flex items-center group cursor-pointer p-3 rounded-xl hover:bg-slate-50/60 transition-all duration-200",whileHover:{x:2},children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-violet-600 rounded border-slate-300 focus:ring-violet-500",checked:t.selectedPriceRange.includes(s.min),onChange:()=>u(s.min)}),e.jsx("span",{className:"ml-4 text-slate-700 group-hover:text-slate-900 transition-colors font-medium",children:s.label})]},s.min))})]})]})})})},me=({product:t,isLiked:c,viewMode:i,index:l,onToggleWishlist:r})=>{const d=x=>x==="amazon"?"orange":"teal";return e.jsxs(m.div,{className:`bg-white/80 backdrop-blur-xl border border-slate-200/60 rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl hover:shadow-slate-900/5 transition-all duration-500 group ${i==="list"?"flex":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.6,delay:l*.1,ease:"easeOut"},whileHover:{y:-4,scale:1.01},children:[e.jsxs("div",{className:`relative ${i==="list"?"w-48 flex-shrink-0":""}`,children:[e.jsx(m.img,{src:t.image,alt:t.title,className:`object-cover p-6 transition-transform duration-700 group-hover:scale-105 ${i==="list"?"w-full h-40":"w-full h-64"}`,onError:x=>{const u=x.target;u.src=`https://via.placeholder.com/400x400/f1f5f9/64748b?text=${encodeURIComponent(t.title.slice(0,20))}`}}),e.jsx(m.button,{className:"absolute top-4 right-4 p-2.5 rounded-full bg-white/90 backdrop-blur-sm border border-slate-200/60 shadow-sm hover:shadow-md transition-all duration-300",onClick:()=>r(t),whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:e.jsx(O,{size:16,className:c?"fill-red-500 text-red-500":"text-slate-400"})}),e.jsx("div",{className:`absolute top-4 left-4 px-2 py-1 bg-${d(t.source)}-100 text-${d(t.source)}-700 border border-${d(t.source)}-200 rounded-full text-xs font-medium capitalize`,children:t.source})]}),e.jsxs("div",{className:`p-6 ${i==="list"?"flex-1":""}`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:`font-semibold text-slate-900 line-clamp-2 ${i==="list"?"text-lg mb-2":"text-base"}`,children:t.title}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex items-center text-yellow-500",children:Array.from({length:Math.round(t.rating)}).map((x,u)=>e.jsx(se,{size:12,className:"fill-current"},u))}),e.jsxs("span",{className:"text-sm text-slate-500 ml-2 font-medium",children:["(",t.reviewsCount,")"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-semibold text-xl text-slate-900",children:["$",t.price.toFixed(2)]}),e.jsx(m.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Y,{variant:"outline",size:"sm",className:`border-${d(t.source)}-300/60 text-${d(t.source)}-700 hover:bg-${d(t.source)}-50/80 rounded-2xl font-medium bg-white/60 backdrop-blur-sm`,children:"View Product"})})})]})]})]},t.id)},ue=({showFavoritesOnly:t=!1})=>e.jsxs(m.div,{className:"text-center py-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{ease:"easeOut"},children:[e.jsx("div",{className:"text-slate-400 mb-4",children:t?e.jsx(O,{size:48,className:"mx-auto"}):e.jsx(J,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:t?"No favorite products found":"No products found"}),e.jsx("p",{className:"text-slate-600 font-light",children:t?"You haven't liked any products yet. Heart some products to see them here!":"Try adjusting your filters or search terms to see more results."})]}),xe=({products:t,currentPageProducts:c,wishlist:i,viewSettings:l,paginationState:r,isSearching:d,searchError:x,pageNumbers:u,onToggleWishlist:b,onPageChange:g,onRetry:j})=>{const a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.22,1,.36,1]}}};return e.jsxs(m.div,{className:l.showFilters?"lg:col-span-2":"lg:col-span-1",variants:a,layout:!0,transition:{duration:.3},"data-products-section":!0,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-10 gap-6",children:[e.jsxs("h2",{className:"font-light text-3xl text-slate-900",children:["Product ",e.jsx("span",{className:"font-semibold",children:"Selections"})]}),r.totalProducts>24&&e.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",(r.currentPage-1)*24+1,"-",Math.min(r.currentPage*24,r.totalProducts)," of ",r.totalProducts," products"]})]}),d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3 text-slate-600",children:[e.jsx(V,{className:"animate-spin text-violet-600",size:20}),e.jsx("span",{className:"font-medium",children:"Searching for products..."})]})}):x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-red-500 text-center",children:[e.jsx("p",{className:"font-medium",children:"Unable to load products"}),e.jsx("p",{className:"text-sm mt-1 font-light",children:x}),e.jsx(m.button,{onClick:j,className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Try Again"})]})}):t.length===0?e.jsx(ue,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid gap-8 ${l.viewMode==="grid"?l.showFilters?"grid-cols-1 md:grid-cols-2":"grid-cols-1 md:grid-cols-2 xl:grid-cols-3":"grid-cols-1"}`,children:e.jsx(A,{children:c.map((s,f)=>e.jsx(me,{product:s,isLiked:i.includes(s.id),viewMode:l.viewMode,index:f,onToggleWishlist:b},s.id))})}),r.totalPages>1&&e.jsxs(m.div,{className:"flex items-center justify-center mt-12 gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(m.button,{onClick:()=>g(r.currentPage-1),disabled:r.currentPage===1,className:"p-3 rounded-2xl border border-slate-300/60 text-slate-600 hover:bg-slate-50/80 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 bg-white/60 backdrop-blur-sm",whileHover:{scale:r.currentPage>1?1.05:1},whileTap:{scale:r.currentPage>1?.95:1},children:e.jsx(te,{size:18})}),e.jsx("div",{className:"flex items-center gap-2",children:u.map((s,f)=>e.jsx(m.button,{onClick:()=>typeof s=="number"?g(s):void 0,disabled:s==="...",className:`min-w-[44px] h-11 rounded-2xl font-medium transition-all duration-300 ${s===r.currentPage?"bg-slate-900 text-white shadow-lg":s==="..."?"text-slate-400 cursor-default":"border border-slate-300/60 text-slate-600 hover:bg-slate-50/80 bg-white/60 backdrop-blur-sm"}`,whileHover:{scale:s!=="..."&&s!==r.currentPage?1.05:1},whileTap:{scale:s!=="..."&&s!==r.currentPage?.95:1},children:s},f))}),e.jsx(m.button,{onClick:()=>g(r.currentPage+1),disabled:r.currentPage===r.totalPages,className:"p-3 rounded-2xl border border-slate-300/60 text-slate-600 hover:bg-slate-50/80 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 bg-white/60 backdrop-blur-sm",whileHover:{scale:r.currentPage<r.totalPages?1.05:1},whileTap:{scale:r.currentPage<r.totalPages?.95:1},children:e.jsx(le,{size:18})})]})]})]})},Ne=()=>{const t=v.useRef(null),[c,i]=W.useState({viewMode:"grid",showFilters:!0}),{projectData:l,elementsWithProducts:r,isLoadingProject:d,isRefreshing:x,refreshProducts:u}=ae(),{wishlist:b,toggleWishlist:g}=oe(l.projectId),j=W.useMemo(()=>r.flatMap(E=>E.products),[r]),{filters:a,filteredProducts:s,hasActiveFilters:f,availableMarketplaces:N,updateSearchTerm:R,toggleElement:o,togglePriceRange:n,updateShowFavoritesOnly:h,toggleMarketplace:p,clearAllFilters:L}=ie(j,l.detectedElements,b),{paginationState:k,getCurrentPageProducts:C,getPageNumbers:y,handlePageChange:w}=ne(s.length),P=C(s),z=y(),D=E=>{var M;(M=t.current)==null||M.getBoundingClientRect()},U=()=>{i(E=>({...E,showFilters:!E.showFilters}))},G=E=>{i(M=>({...M,viewMode:E}))},I=async()=>{await u()},B=()=>{window.location.reload()},q={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}};return d?e.jsx("div",{className:"pt-16 min-h-screen bg-gradient-to-b from-white via-slate-50/30 to-white flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-3 text-slate-600",children:[e.jsx(V,{className:"animate-spin text-violet-600\\",size:24}),e.jsx("span",{className:"font-medium text-lg",children:"Loading project..."})]})}):e.jsxs("div",{ref:t,className:"pt-16 relative overflow-hidden bg-gradient-to-b from-white via-slate-50/30 to-white min-h-screen",onMouseMove:D,children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(m.div,{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-violet-100/40 to-blue-100/40 rounded-full blur-3xl",animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx("div",{className:"absolute inset-0 opacity-[0.02]",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"curation-dots",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("circle",{cx:"20",cy:"20",r:"1",fill:"currentColor"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#curation-dots)",className:"text-slate-600"})]})})]}),e.jsx(ce,{projectName:l.projectName}),e.jsx(de,{totalProducts:s.length,currentPage:k.currentPage,totalPages:k.totalPages,hasActiveFilters:f,viewSettings:c,isRefreshing:x,onClearFilters:L,onToggleFilters:U,onRefreshProducts:I,onViewModeChange:G}),e.jsx(m.div,{className:"max-w-7xl mx-auto px-6 lg:px-8 py-20 relative z-10",variants:q,initial:"hidden",animate:"visible",children:e.jsxs("div",{className:`grid gap-12 ${c.showFilters?"grid-cols-1 lg:grid-cols-3":"grid-cols-1"}`,children:[e.jsx(he,{filters:a,detectedElements:l.detectedElements,wishlistCount:b.length,isVisible:c.showFilters,availableMarketplaces:N,onSearchChange:R,onToggleElement:o,onTogglePriceRange:n,onToggleFavoritesOnly:h,onToggleMarketplace:p}),e.jsx(xe,{products:s,currentPageProducts:P,wishlist:b,viewSettings:c,paginationState:k,isSearching:!1,searchError:void 0,pageNumbers:z,onToggleWishlist:g,onPageChange:w,onRetry:B})]})})]})};export{Ne as default};
