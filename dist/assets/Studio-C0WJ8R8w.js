import{c as M,z as J,h as z,B as be,C as O,q as e,A as T,t,X as L,D as R,L as je,o as ve,E as Q,R as we}from"./index-8wLK5tP2.js";import{P as _,G as Ne,L as ze,B as ee}from"./Button-B956L8VM.js";import{A as U}from"./apiUsageService-40l3Zyjx.js";import{T as Y,P as ke}from"./trash-2-V8kPF9HU.js";import{S as Ce}from"./star-C1wr8eot.js";import{C as Ae}from"./check-iN1kQgfS.js";import{Z as Pe}from"./zap-Bysh6lpQ.js";import{R as Ee}from"./refresh-cw-EP0e0rzr.js";import{A as Se}from"./alert-circle-mFFPV712.js";import{C as G}from"./calendar-CVpwYZaz.js";import{U as Ie}from"./upload-D3UcShIs.js";import{S as K}from"./search-h4tSjVuG.js";import{F as De}from"./folder-open-e8JQSl-n.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=M("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=M("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=M("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=M("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=M("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=M("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=M("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);async function Ue(a){var s,o,l,i,y;try{const{data:{session:p}}=await J.auth.getSession();if(!p)throw new Error("User not authenticated");const d=await a.arrayBuffer(),n=btoa(new Uint8Array(d).reduce((x,C)=>x+String.fromCharCode(C),"")),h=await fetch("https://lblimaujsnwvcmhljuux.supabase.co/functions/v1/gemini-api",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify({prompt:`Analyze this interior design image and list the main furniture and decor items. Return a clean list of items, one per line, without any additional text or formatting. Example output format:
Armchair
Coffee Table
Pendant Light`,imageData:{mimeType:a.type,data:n}})});if(!h.ok){const x=await h.json();throw new Error(x.error||"Failed to analyze image")}const v=(y=(i=(l=(o=(s=(await h.json()).candidates)==null?void 0:s[0])==null?void 0:o.content)==null?void 0:l.parts)==null?void 0:i[0])==null?void 0:y.text;if(!v)throw new Error("No analysis results returned");return v.split(`
`).map(x=>x.trim()).filter(x=>x.length>0&&x!=="null"&&x!=="undefined")}catch(p){throw console.error("Error analyzing image:",p),p}}async function _e(a){var s,o,l,i,y;try{const{data:{session:p}}=await J.auth.getSession();if(!p)throw new Error("User not authenticated");const d=`You are an expert e-commerce search optimization specialist for an AI-powered interior design application. Based on the detected item "${a}" from an uploaded room image, generate highly optimized search queries for two major home goods marketplaces.

CONTEXT: This item was detected through AI image analysis of a real room photo. The queries must be precision-tuned for each platform's unique search algorithms and user behavior patterns.

Generate 4 search queries total:

**AMAZON-OPTIMIZED QUERIES (2):**
- Leverage Amazon's broad product catalog with brand-agnostic terms
- Include specific colors, materials, dimensions, and functional features
- Use terms that capture Amazon's search algorithm preferences (keywords customers actually search for)
- Focus on product specifications and practical benefits
- Include alternative product names/synonyms

**ETSY-OPTIMIZED QUERIES (2):**
- Utilize handmade, vintage, and artisanal terminology
- Incorporate design style descriptors (modern, rustic, bohemian, etc.)
- Include room context where the item would be placed
- Focus on aesthetic appeal and unique design-focused language
- Use Etsy's craft-centric and artisanal vocabulary

Each query should be:
- Highly specific and actionable for shopping and searching on the respective marketplace
- Different from the others (no repetitive variations)
- Optimized for the target marketplace's search behavior
- Designed to return the most relevant product matches

Format response exactly as:
AMAZON:
[query 1]
[query 2]

ETSY:
[query 1]
[query 2]`,n=await fetch("https://lblimaujsnwvcmhljuux.supabase.co/functions/v1/gemini-api",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.access_token}`},body:JSON.stringify({prompt:d,imageData:null})});if(!n.ok){const C=await n.json();throw new Error(C.error||"Failed to generate search queries")}const h=(y=(i=(l=(o=(s=(await n.json()).candidates)==null?void 0:s[0])==null?void 0:o.content)==null?void 0:l.parts)==null?void 0:i[0])==null?void 0:y.text;if(!h)throw new Error("No query results returned");const b=h.match(/AMAZON:\s*([\s\S]*?)(?=ETSY:|$)/i),v=h.match(/ETSY:\s*([\s\S]*?)$/i),k=b?b[1].split(`
`).map(C=>C.trim()).filter(C=>C.length>0).slice(0,2):[`${a} furniture`,`modern ${a.toLowerCase()}`],x=v?v[1].split(`
`).map(C=>C.trim()).filter(C=>C.length>0).slice(0,2):[`handmade ${a.toLowerCase()}`,`custom ${a.toLowerCase()} decor`];for(;k.length<2;)k.push(`${a} ${["premium","luxury","modern","classic"][k.length]}`);for(;x.length<2;)x.push(`${a} ${["handmade","custom","unique","artisan"][x.length]}`);return{amazonQueries:k.slice(0,2),etsyQueries:x.slice(0,2)}}catch(p){return console.error("Error generating dual search queries:",p),{amazonQueries:[`${a} furniture`,`modern ${a.toLowerCase()}`],etsyQueries:[`handmade ${a} decor`,`custom ${a.toLowerCase()} artisan`]}}}const Oe=()=>{const[a,s]=z.useState({status:"idle",detectedElements:[]}),[o,l]=z.useState([]),[i,y]=z.useState(!1),[p,d]=z.useState({amazon:!0,etsy:!0});z.useEffect(()=>{(async()=>{try{const u=await U.checkApiUsageLimit("amazon"),c=await U.checkApiUsageLimit("etsy");d({amazon:u,etsy:c})}catch(u){console.error("Error checking API limits:",u)}})()},[]);const n=async j=>{try{s({status:"uploading",file:j,preview:URL.createObjectURL(j),detectedElements:[]}),s(f=>({...f,status:"analyzing"}));const u=await Ue(j),c=[];for(const f of u){const w=await _e(f);c.push({name:f,amazonQueries:w.amazonQueries,etsyQueries:w.etsyQueries,status:"idle"})}s(f=>({...f,status:"complete",detectedElements:c}))}catch(u){console.error("Error processing image:",u),s(c=>({...c,status:"error",error:"Failed to analyze image. Please try again.",detectedElements:[]}))}},m=z.useCallback(async j=>{j.preventDefault();const u=j.dataTransfer.files[0];u&&u.type.startsWith("image/")&&await n(u)},[]),h=z.useCallback(async j=>{var c;const u=(c=j.target.files)==null?void 0:c[0];u&&await n(u)},[]),b=j=>{l(u=>u.includes(j)?u.filter(c=>c!==j):[...u,j])},v=(j,u,c)=>{s(f=>({...f,detectedElements:f.detectedElements.map(w=>w.name===j?c==="amazon"?{...w,selectedAmazonQuery:u}:{...w,selectedEtsyQuery:u}:w)}))},k=()=>{a.detectedElements.length&&s(j=>({...j,detectedElements:j.detectedElements.map(u=>({...u,selectedAmazonQuery:p.amazon?u.amazonQueries[0]:void 0,selectedEtsyQuery:p.etsy?u.etsyQueries[0]:void 0}))}))},x=()=>{a.preview&&URL.revokeObjectURL(a.preview),s({status:"idle",detectedElements:[]}),l([])},C=a.detectedElements.some(j=>j.selectedAmazonQuery||j.selectedEtsyQuery);return{uploadState:a,expandedElements:o,isCreatingProject:i,apiLimits:p,handleDrop:m,handleFileSelect:h,toggleElement:b,updateSelectedQuery:v,selectAllElements:k,clearImage:x,hasSelectedQueries:C,createNewProject:async(j,u,c=!0)=>{if(c&&!(!a.preview||!a.detectedElements.length||!a.file))try{y(!0);const f={...a};s(P=>({...P,detectedElements:P.detectedElements.map(E=>E.selectedAmazonQuery||E.selectedEtsyQuery?{...E,status:"searching"}:E)}));const w={id:`temp-${Date.now()}`,name:`Design Project ${j.length+1}`,status:"analyzing",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),user_id:"temp",description:null,image_url:null,image_file_name:f.file.name,isTemporary:!0};u(P=>[w,...P]),setTimeout(async()=>{try{const P=f.detectedElements.filter(N=>N.selectedAmazonQuery||N.selectedEtsyQuery).map(N=>({name:N.name,search_queries:{amazon:N.amazonQueries,etsy:N.etsyQueries},selected_amazon_query:N.selectedAmazonQuery,selected_etsy_query:N.selectedEtsyQuery})),{project:E,products:r}=await _.createProjectWithSearch({name:w.name,image_file_name:f.file.name,status:"analyzing"},f.file,P);u(N=>N.map(A=>A.id===w.id?E:A)),x()}catch(P){console.error("Error creating project:",P),s(E=>({...E,detectedElements:E.detectedElements.map(r=>r.status==="searching"?{...r,status:"error",errorMessage:"Failed to search for products"}:r)})),u(E=>E.filter(r=>r.id!==w.id))}finally{y(!1)}},100)}catch(f){console.error("Error in createNewProject:",f),y(!1)}}}},Le=()=>{const[a,s]=z.useState([]),[o,l]=z.useState([]),[i,y]=z.useState(!0),[p,d]=z.useState(null),[n,m]=z.useState({isOpen:!1,projectId:null,projectName:"",isDeleting:!1}),h=z.useRef(null),{isAuthenticated:b}=be();z.useEffect(()=>{b&&v()},[b]);const v=async()=>{try{y(!0);const c=await _.getProjects();s(c)}catch(c){console.error("Error loading projects:",c)}finally{y(!1)}},k=c=>{d(c),setTimeout(()=>{var f,w;(f=h.current)==null||f.focus(),(w=h.current)==null||w.select()},100)},x=async(c,f)=>{try{await _.updateProject(c,{name:f}),s(w=>w.map(P=>P.id===c?{...P,name:f}:P)),d(null)}catch(w){console.error("Error updating project name:",w)}};return{projects:a,setProjects:s,filteredProjects:o,setFilteredProjects:l,isLoadingProjects:i,editingProjectId:p,deleteModal:n,editInputRef:h,loadProjects:v,startEditingProject:k,handleProjectNameChange:x,handleProjectNameKeyDown:(c,f)=>{c.key==="Enter"?x(f,c.currentTarget.value):c.key==="Escape"&&d(null)},openDeleteModal:(c,f)=>{m({isOpen:!0,projectId:c,projectName:f,isDeleting:!1})},closeDeleteModal:()=>{n.isDeleting||m({isOpen:!1,projectId:null,projectName:"",isDeleting:!1})},confirmDeleteProject:async()=>{if(n.projectId)try{m(c=>({...c,isDeleting:!0})),await _.deleteProject(n.projectId),s(c=>c.filter(f=>f.id!==n.projectId)),m({isOpen:!1,projectId:null,projectName:"",isDeleting:!1})}catch(c){console.error("Error deleting project:",c),m(f=>({...f,isDeleting:!1}))}}}},He=a=>{const[s,o]=z.useState({searchQuery:"",viewMode:"grid"}),[l,i]=z.useState([]);return z.useEffect(()=>{if(!s.searchQuery.trim())i(a);else{const n=a.filter(m=>{var h;return m.name.toLowerCase().includes(s.searchQuery.toLowerCase())||((h=m.description)==null?void 0:h.toLowerCase().includes(s.searchQuery.toLowerCase()))||m.status.toLowerCase().includes(s.searchQuery.toLowerCase())});i(n)}},[a,s.searchQuery]),{filters:s,filteredProjects:l,updateSearchQuery:n=>{o(m=>({...m,searchQuery:n}))},updateViewMode:n=>{o(m=>({...m,viewMode:n}))},clearSearch:()=>{o(n=>({...n,searchQuery:""}))}}},Be=a=>{const{subscription:s,limits:o}=O(),[l,i]=z.useState(!1),y=o.projects,p=a.length>=y,d=!p,n=()=>d?!0:(i(!0),!1),m=()=>{i(!1)},h=()=>{i(!1)};return{hasReachedLimit:p,canCreateProject:d,showSubscriptionModal:l,maxFreeProjects:y,isSubscribed:s.tier!=="free",handleCreateProjectAttempt:n,closeSubscriptionModal:m,handleDeleteProjectFromModal:h,subscription:s}},Re=({isOpen:a,onClose:s,onConfirm:o,title:l,message:i,confirmText:y="Confirm",cancelText:p="Cancel",type:d="danger",isLoading:n=!1})=>{const m=v=>{v.target===v.currentTarget&&s()},b=(()=>{switch(d){case"danger":return{iconBg:"bg-red-100",iconColor:"text-red-600",confirmBg:"bg-red-600 hover:bg-red-700",confirmText:"text-white"};case"warning":return{iconBg:"bg-yellow-100",iconColor:"text-yellow-600",confirmBg:"bg-yellow-600 hover:bg-yellow-700",confirmText:"text-white"};case"info":return{iconBg:"bg-blue-100",iconColor:"text-blue-600",confirmBg:"bg-blue-600 hover:bg-blue-700",confirmText:"text-white"};default:return{iconBg:"bg-red-100",iconColor:"text-red-600",confirmBg:"bg-red-600 hover:bg-red-700",confirmText:"text-white"}}})();return e.jsx(T,{children:a&&e.jsxs(t.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsx(t.div,{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:m}),e.jsxs(t.div,{className:"relative w-full max-w-md bg-white/95 backdrop-blur-xl border border-slate-200/60 rounded-3xl shadow-2xl shadow-slate-900/20 overflow-hidden",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:[.22,1,.36,1]},children:[e.jsx(t.button,{onClick:s,className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100/60 rounded-full transition-all duration-200 z-10",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(L,{size:18})}),e.jsxs("div",{className:"p-8",children:[e.jsx(t.div,{className:`w-16 h-16 ${b.iconBg} rounded-2xl flex items-center justify-center mx-auto mb-6`,initial:{scale:0},animate:{scale:1},transition:{delay:.1,duration:.3,ease:"easeOut"},children:e.jsx(Te,{size:24,className:b.iconColor})}),e.jsx(t.h2,{className:"text-2xl font-semibold text-slate-900 text-center mb-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},children:l}),e.jsx(t.p,{className:"text-slate-600 text-center leading-relaxed mb-8",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:i}),e.jsxs(t.div,{className:"flex flex-col sm:flex-row gap-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4,duration:.3},children:[e.jsx(t.button,{onClick:s,disabled:n,className:"flex-1 px-6 py-3 border border-slate-300/60 rounded-2xl font-medium text-slate-700 hover:bg-slate-50/80 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.02},whileTap:{scale:.98},children:p}),e.jsx(t.button,{onClick:o,disabled:n,className:`flex-1 px-6 py-3 rounded-2xl font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ${b.confirmBg} ${b.confirmText}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Deleting..."})]}):y})]})]})]})]})})},Fe=({isOpen:a,onClose:s,onDeleteProject:o,projectCount:l,maxFreeProjects:i})=>{const y=d=>{d.target===d.currentTarget&&s()},p=[{name:"Pro",price:19,period:"month",description:"Perfect for individual designers",features:["Unlimited projects","Advanced AI analysis","Priority product matching","Export to PDF","Email support"],popular:!1,color:"from-violet-600 to-purple-600"},{name:"Studio",price:49,period:"month",description:"Best for design teams",features:["Everything in Pro","Team collaboration","Brand customization","API access","Priority support","Custom integrations"],popular:!0,color:"from-blue-600 to-indigo-600"}];return e.jsx(T,{children:a&&e.jsxs(t.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsx(t.div,{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:y}),e.jsxs(t.div,{className:"relative w-full max-w-4xl bg-white/95 backdrop-blur-xl border border-slate-200/60 rounded-3xl shadow-2xl shadow-slate-900/20 overflow-hidden",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:[.22,1,.36,1]},children:[e.jsx(t.button,{onClick:s,className:"absolute top-6 right-6 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100/60 rounded-full transition-all duration-200 z-10",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(L,{size:20})}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-600 to-blue-600 text-white p-8 text-center",children:[e.jsx(t.div,{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.1,duration:.3,ease:"easeOut"},children:e.jsx(R,{size:28,className:"text-white"})}),e.jsx(t.h2,{className:"text-3xl font-bold mb-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},children:"Project Limit Reached"}),e.jsxs(t.p,{className:"text-white/90 text-lg",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:["You've reached the limit of ",i," free projects (",l,"/",i,")"]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-4 text-center",children:"Choose an option to continue:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs(t.button,{onClick:o,className:"p-6 border-2 border-slate-200 rounded-2xl hover:border-red-300 hover:bg-red-50/50 transition-all duration-300 text-left group",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center group-hover:bg-red-200 transition-colors",children:e.jsx(Y,{size:20,className:"text-red-600"})}),e.jsx("h4",{className:"font-semibold text-slate-900",children:"Delete a Project"})]}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Remove an existing project to make room for a new one. This action cannot be undone."})]}),e.jsxs(t.button,{className:"p-6 border-2 border-violet-200 bg-gradient-to-br from-violet-50 to-blue-50 rounded-2xl hover:border-violet-300 transition-all duration-300 text-left group",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-violet-100 rounded-xl flex items-center justify-center group-hover:bg-violet-200 transition-colors",children:e.jsx(R,{size:20,className:"text-violet-600"})}),e.jsx("h4",{className:"font-semibold text-slate-900",children:"Upgrade to Pro"})]}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Get unlimited projects plus advanced features to supercharge your design workflow."})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6 text-center",children:"Unlock Unlimited Projects"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:p.map((d,n)=>e.jsxs(t.div,{className:`relative p-6 border-2 rounded-2xl transition-all duration-300 ${d.popular?"border-blue-300 bg-gradient-to-br from-blue-50 to-indigo-50":"border-slate-200 hover:border-violet-300 hover:bg-violet-50/30"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+n*.1,duration:.3},whileHover:{scale:1.02},children:[d.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-1 rounded-full text-xs font-semibold flex items-center gap-1",children:[e.jsx(Ce,{size:12}),"Most Popular"]})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"text-xl font-bold text-slate-900 mb-1",children:d.name}),e.jsx("p",{className:"text-slate-600 text-sm mb-3",children:d.description}),e.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[e.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["$",d.price]}),e.jsxs("span",{className:"text-slate-600",children:["/",d.period]})]})]}),e.jsx("ul",{className:"space-y-3 mb-6",children:d.features.map((m,h)=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ae,{size:12,className:"text-emerald-600"})}),e.jsx("span",{className:"text-slate-700 text-sm",children:m})]},h))}),e.jsxs(t.button,{className:`w-full py-3 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2 ${d.popular?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 shadow-lg hover:shadow-xl":"bg-gradient-to-r from-violet-600 to-purple-600 text-white hover:from-violet-700 hover:to-purple-700 shadow-lg hover:shadow-xl"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Pe,{size:16}),"Choose ",d.name]})]},d.name))})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-slate-500 text-sm",children:"All plans include a 14-day free trial. Cancel anytime."})})]})]})]})})},Ye=({isOpen:a,onClose:s,apiUsage:o,isLoading:l=!1})=>{const{subscription:i,limits:y}=O(),p=b=>{b.target===b.currentTarget&&s()},d=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),n=b=>{const v=new Date(b),k=new Date(v);return k.setMonth(k.getMonth()+1),d(k.toISOString())},m=(b,v)=>v<=0?0:Math.min(100,Math.round(b/v*100)),h=()=>i.tier==="free"?25:i.tier==="pro"?125:750;return e.jsx(T,{children:a&&e.jsxs(t.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsx(t.div,{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p}),e.jsxs(t.div,{className:"relative w-full max-w-2xl bg-white/95 backdrop-blur-xl border border-slate-200/60 rounded-3xl shadow-2xl shadow-slate-900/20 overflow-hidden",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3,ease:[.22,1,.36,1]},children:[e.jsx(t.button,{onClick:s,className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100/60 rounded-full transition-all duration-200 z-10",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(L,{size:20})}),e.jsxs("div",{className:"p-8 border-b border-slate-200/60",children:[e.jsx(t.div,{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-2xl flex items-center justify-center mx-auto mb-6",initial:{scale:0},animate:{scale:1},transition:{delay:.1,duration:.3,ease:"easeOut"},children:e.jsx(te,{size:24,className:"text-white"})}),e.jsx(t.h2,{className:"text-2xl font-semibold text-slate-900 text-center mb-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},children:"Your API Usage Statistics"}),e.jsx(t.p,{className:"text-slate-600 text-center leading-relaxed",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:"Track your API usage and monthly limits"})]}),e.jsx("div",{className:"p-8",children:l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3 text-slate-600",children:[e.jsx(Ee,{className:"animate-spin",size:20}),e.jsx("span",{className:"font-medium",children:"Loading API usage data..."})]})}):o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Amazon API Usage"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Monthly Usage"}),e.jsxs("span",{className:"text-sm font-medium",children:[o.amazon_total_count," / ",y.apiCalls]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m(o.amazon_total_count,y.apiCalls)>=90?"bg-red-500":m(o.amazon_total_count,y.apiCalls)>=70?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${m(o.amazon_total_count,y.apiCalls)}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(G,{size:14,className:"flex-shrink-0"}),e.jsxs("span",{children:["Next reset: ",n(o.last_reset_date)]})]})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 shadow-sm",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-teal-500 rounded-full"}),"Etsy API Usage"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Monthly Usage"}),e.jsxs("span",{className:"text-sm font-medium",children:[o.etsy_total_count," / ",h()]})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${m(o.etsy_total_count,h())>=90?"bg-red-500":m(o.etsy_total_count,h())>=70?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${m(o.etsy_total_count,h())}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(G,{size:14,className:"flex-shrink-0"}),e.jsxs("span",{children:["Next reset: ",n(o.last_reset_date)]})]})]})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50/80 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-blue-600 text-xs",children:"i"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium mb-1",children:"About API Usage"}),e.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:"API usage counters reset monthly based on your billing cycle. Your monthly limit is determined by your subscription plan."})]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Se,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"No API usage data available"}),e.jsx("p",{className:"text-slate-600",children:"API usage tracking data is not available at this time."})]})}),e.jsx("div",{className:"p-6 border-t border-slate-200/60 text-center",children:e.jsx(t.button,{onClick:s,className:"px-6 py-3 border border-slate-300/60 rounded-2xl font-medium text-slate-700 hover:bg-slate-50/80 transition-all duration-300",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})})]})]})})},Ve=()=>{const a={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.22,1,.36,1]}}};return e.jsxs(t.div,{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900 text-white py-16 lg:py-20 relative overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"hero-dots",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:e.jsx("circle",{cx:"30",cy:"30",r:"2",fill:"currentColor"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#hero-dots)",className:"text-white"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 relative z-10",children:e.jsxs(t.div,{className:"max-w-4xl",variants:a,initial:"hidden",animate:"visible",children:[e.jsx(t.div,{variants:s,className:"w-16 h-1 bg-gradient-to-r from-violet-400 to-blue-400 mb-6 rounded-full"}),e.jsxs(t.h1,{variants:s,className:"font-light text-4xl md:text-5xl lg:text-6xl mb-6 leading-tight",children:["Your AI-Powered",e.jsx("span",{className:"block font-semibold bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent",children:"Design Studio"})]}),e.jsx(t.p,{variants:s,className:"text-xl text-slate-300 leading-relaxed max-w-3xl font-light",children:"Transform your space with intelligent design analysis. Upload any interior design and receive curated recommendations from both Amazon and Etsy, powered by My Design Index."})]})})]})},qe=({projectCount:a,searchQuery:s,filters:o,apiUsage:l,globalLimits:i,onClearSearch:y,onViewModeChange:p,onShowApiUsage:d})=>{const{subscription:n}=O(),m=(x,C)=>C<=0?0:Math.min(100,Math.round(x/C*100)),h=l&&(i!=null&&i.amazon.monthly_limit)?m(l.amazon_total_count,i.amazon.monthly_limit):0,b=l&&(i!=null&&i.etsy.monthly_limit)?m(l.etsy_total_count,i.etsy.monthly_limit):0,v=x=>x>=90?"text-red-500":x>=70?"text-amber-500":"text-emerald-500",k=()=>n.tier==="free"?25:n.tier==="pro"?125:750;return e.jsx("div",{className:"bg-white/90 backdrop-blur-xl border-b border-slate-200/60 relative z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:[a," projects ",s?"found":"created"]}),s&&e.jsx(t.button,{onClick:y,className:"text-sm text-slate-500 hover:text-slate-700 font-medium px-3 py-1.5 rounded-full hover:bg-slate-100/60 transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Clear search"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${n.tier==="studio"?"bg-blue-100 text-blue-700":n.tier==="pro"?"bg-violet-100 text-violet-700":"bg-slate-100 text-slate-700"}`,children:[n.tier.charAt(0).toUpperCase()+n.tier.slice(1)," Plan"]}),l&&i&&e.jsxs("div",{className:"flex items-center gap-3",children:[i.amazon.monthly_limit>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxs("span",{className:`font-medium ${v(h)}`,children:["Amazon: ",l.amazon_total_count,"/",i.amazon.monthly_limit]}),e.jsx("div",{className:"w-16 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${h>=90?"bg-red-500":h>=70?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${h}%`}})})]}),i.etsy.monthly_limit>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsxs("span",{className:`font-medium ${v(b)}`,children:["Etsy: ",l.etsy_total_count,"/",k()]}),e.jsx("div",{className:"w-16 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${b>=90?"bg-red-500":b>=70?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${m(l.etsy_total_count,k())}%`}})})]}),d&&e.jsx(t.button,{onClick:d,className:"p-1.5 text-slate-500 hover:text-slate-700 hover:bg-slate-100/60 rounded-full transition-all duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},title:"View API usage details",children:e.jsx(te,{size:14})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[n.tier==="free"&&e.jsx(t.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(je,{to:"/upgrade",className:"flex items-center space-x-2 px-4 py-2.5 bg-teal-500 text-white rounded-full hover:bg-teal-600 transition-all duration-200 font-medium",children:e.jsx("span",{children:"Upgrade Access"})})}),e.jsxs(t.button,{onClick:()=>window.location.href="/visionboard",className:"flex items-center space-x-2 px-6 py-2.5 bg-slate-900 text-white rounded-full hover:bg-slate-800 transition-all duration-200 font-medium",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx($e,{size:16}),e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Vision Board"}),e.jsxs("span",{className:"relative ml-1 px-2 py-0.5 text-xs font-bold bg-gradient-to-r from-violet-500 to-blue-500 text-white rounded-full shadow-lg",children:[e.jsx("span",{className:"relative z-10",children:"BETA"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-400 to-blue-400 rounded-full blur-sm opacity-70"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent rounded-full"})]})]})]}),e.jsxs("div",{className:"flex border border-slate-300/60 rounded-2xl overflow-hidden bg-white/60 backdrop-blur-sm",children:[e.jsx(t.button,{onClick:()=>p("grid"),className:`p-3 transition-all duration-200 ${o.viewMode==="grid"?"bg-slate-100/80 text-slate-900":"text-slate-600 hover:bg-slate-100/60"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Ne,{size:18})}),e.jsx(t.button,{onClick:()=>p("list"),className:`p-3 border-l border-slate-300/60 transition-all duration-200 ${o.viewMode==="list"?"bg-slate-100/80 text-slate-900":"text-slate-600 hover:bg-slate-100/60"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(ze,{size:18})})]})]})]})})})},Ze=({uploadState:a,expandedElements:s,isCreatingProject:o,hasSelectedQueries:l,canCreateProject:i,onDrop:y,onFileSelect:p,onClearImage:d,onToggleElement:n,onUpdateSelectedQuery:m,onSelectAllElements:h,onCreateProject:b})=>{const v=ve(),{limits:k}=O(),[x,C]=z.useState({amazon:!0,etsy:!0});z.useEffect(()=>{(async()=>{try{const N=await U.checkApiUsageLimit("amazon"),A=await U.checkApiUsageLimit("etsy");C({amazon:N,etsy:A})}catch(N){console.error("Error checking API limits:",N)}})()},[]);const g=()=>{switch(a.status){case"uploading":return e.jsxs(t.div,{className:"flex items-center space-x-3 text-slate-700",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx(Q,{className:"animate-spin text-violet-600",size:20}),e.jsx("span",{className:"font-medium",children:"Uploading image..."})]});case"analyzing":return e.jsxs(t.div,{className:"flex items-center space-x-3 text-slate-700",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx(Q,{className:"animate-spin text-violet-600",size:20}),e.jsx("span",{className:"font-medium",children:"Analyzing design..."})]});case"complete":return e.jsxs(t.div,{className:"flex items-center space-x-3 text-emerald-600",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:[e.jsx(W,{size:20}),e.jsx("span",{className:"font-medium",children:"Analysis complete!"})]});case"error":return e.jsxs(t.div,{className:"flex items-center space-x-3 text-red-600",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:[e.jsx(F,{size:20}),e.jsx("span",{className:"font-medium",children:a.error||"Upload failed. Please try again."})]});default:return null}},j=r=>{if(!i){v("/upgrade"),r.target.value="";return}p(r)},u=r=>{if(r.preventDefault(),!i){v("/upgrade");return}y(r)},c=()=>{v("/upgrade")},f=r=>{if(!r.selectedAmazonQuery&&!r.selectedEtsyQuery)return null;switch(r.status){case"searching":return e.jsx("div",{className:"ml-2 flex items-center",children:e.jsx(Q,{size:14,className:"text-violet-500 animate-spin"})});case"complete":return e.jsx("div",{className:"ml-2 flex items-center",children:e.jsx(W,{size:14,className:"text-emerald-500"})});case"error":return e.jsx("div",{className:"ml-2 flex items-center",children:e.jsx(F,{size:14,className:"text-red-500"})});default:return null}},w=r=>{if(s.includes(r)){n(r);return}s.forEach(N=>{N!==r&&n(N)}),s.includes(r)||n(r)},P=(r,N,A)=>{m(r,N,A);const S=a.detectedElements.find($=>$.name===r);if(S){const $=A==="amazon"?!!N:!!S.selectedAmazonQuery,H=A==="etsy"?!!N:!!S.selectedEtsyQuery;$&&H&&setTimeout(()=>{s.includes(r)&&n(r)},300)}},E=()=>k.etsyCalls?k.etsyCalls:25;return e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-900/5 hover:shadow-2xl hover:shadow-slate-900/10 transition-all duration-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("h2",{className:"font-semibold text-2xl text-slate-900 flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-violet-500 rounded-full"}),"New Project"]}),a.status!=="idle"&&e.jsx(t.button,{onClick:d,className:"p-2.5 text-slate-400 hover:text-red-500 hover:bg-red-50/80 rounded-full transition-all duration-300",title:"Clear image",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Y,{size:18})})]}),e.jsx(t.div,{className:`border-2 border-dashed rounded-2xl p-8 text-center mb-8 transition-all duration-300 relative overflow-hidden ${a.status==="idle"?i?"border-slate-300/60 hover:border-violet-400 hover:bg-violet-50/30":"border-amber-300/60 bg-amber-50/20":"border-violet-400/60 bg-violet-50/20"}`,onDragOver:r=>r.preventDefault(),onDrop:u,whileHover:{scale:a.status==="idle"&&i?1.01:1},children:a.preview?e.jsxs(t.div,{className:"relative",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,ease:"easeOut"},children:[e.jsx("img",{src:a.preview,alt:"Preview",className:"w-full h-48 object-cover rounded-xl shadow-lg"}),e.jsx("div",{className:"mt-6",children:g()})]}):e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[i&&e.jsx(Ie,{className:"mx-auto mb-6 text-slate-400",size:36}),i?e.jsx("p",{className:"text-slate-600 mb-6 font-medium",children:"Drag and drop your image here or"}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-amber-700 mb-4 font-medium",children:["Project limit reached (",k.projects,"/",k.projects,")"]}),e.jsx("p",{className:"text-amber-600 mb-6 text-sm",children:"Upgrade to Pro for unlimited projects or delete an existing project"})]}),e.jsx("div",{className:"flex justify-center",children:i?e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:j}),e.jsxs(t.div,{className:"relative flex items-center space-x-3 px-6 py-3.5 rounded-full font-medium transition-all duration-300 bg-slate-900 text-white hover:bg-slate-800",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},animate:{y:[0,-8,0],rotateX:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/15 to-transparent rounded-full",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(Qe,{size:18,className:"relative z-10"}),e.jsx("span",{className:"relative z-10",children:"Upload Image"})]})]}):e.jsxs(t.button,{onClick:c,className:"relative flex items-center space-x-3 px-6 py-3.5 rounded-full font-medium transition-all duration-300 bg-amber-600 text-white hover:bg-amber-700",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},animate:{y:[0,-8,0],rotateX:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/15 to-transparent rounded-full",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(R,{size:18,className:"relative z-10"}),e.jsx("span",{className:"relative z-10",children:"Upgrade to Upload"})]})})]})}),a.status==="complete"&&a.detectedElements&&e.jsxs(t.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-semibold text-lg text-slate-900 flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Detected Elements"]}),e.jsx(t.button,{onClick:h,className:"text-sm text-violet-600 hover:text-violet-700 font-medium px-3 py-1.5 rounded-full hover:bg-violet-50/80 transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Select All"})]}),e.jsx("div",{className:"mb-4 p-3 bg-blue-50/80 rounded-xl",children:e.jsxs("p",{className:"text-xs text-blue-700 leading-relaxed",children:[e.jsx("strong",{children:"Dual Marketplace Search:"})," You can select one search query from each marketplace (Amazon and Etsy) for each element."]})}),e.jsx("div",{className:"space-y-3",children:e.jsx(T,{children:a.detectedElements.map((r,N)=>e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.4,delay:N*.1,ease:"easeOut"},className:"border border-slate-200/60 rounded-2xl overflow-hidden bg-white/60 backdrop-blur-sm hover:shadow-md hover:shadow-slate-900/5 transition-all duration-300",children:[e.jsxs(t.div,{className:"flex items-center justify-between p-5 cursor-pointer hover:bg-slate-50/50",onClick:()=>w(r.name),whileHover:{x:2},children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsx("span",{className:"text-slate-700 font-medium",children:r.name}),f(r)]}),e.jsx(t.div,{animate:{rotate:s.includes(r.name)?180:0},transition:{duration:.2},children:e.jsx(Me,{size:18,className:"text-slate-400"})})]}),e.jsx(T,{children:s.includes(r.name)&&e.jsxs(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"border-t border-slate-200/60 bg-slate-50/30 p-5",children:[r.status==="error"&&r.errorMessage&&e.jsx("div",{className:"mb-4 p-3 bg-red-50/80 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-xs text-red-700 font-medium",children:r.errorMessage})}),e.jsxs("div",{className:"space-y-4",children:[x.amazon&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-orange-700 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Amazon Options"]}),e.jsx("div",{className:"space-y-2",children:r.amazonQueries.map((A,S)=>e.jsxs(t.label,{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-white/60 transition-colors duration-200 cursor-pointer",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:S*.05},children:[e.jsx("input",{type:"checkbox",name:`amazon-query-${r.name}`,value:A,checked:r.selectedAmazonQuery===A,onChange:()=>{P(r.name,r.selectedAmazonQuery===A?"":A,"amazon")},className:"form-checkbox h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-slate-600 font-medium",children:A})]},`amazon-${S}`))})]}),x.etsy&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-teal-700 mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-teal-500 rounded-full"}),"Etsy Options"]}),e.jsx("div",{className:"space-y-2",children:r.etsyQueries.map((A,S)=>e.jsxs(t.label,{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-white/60 transition-colors duration-200 cursor-pointer",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:S*.05},children:[e.jsx("input",{type:"checkbox",name:`etsy-query-${r.name}`,value:A,checked:r.selectedEtsyQuery===A,onChange:()=>{P(r.name,r.selectedEtsyQuery===A?"":A,"etsy")},className:"form-checkbox h-4 w-4 text-teal-600 border-slate-300 focus:ring-teal-500"}),e.jsx("span",{className:"text-sm text-slate-600 font-medium",children:A})]},`etsy-${S}`))})]}),!x.amazon&&e.jsx("div",{className:"p-3 bg-amber-50/80 border border-amber-200 rounded-xl",children:e.jsx("p",{className:"text-xs text-amber-700 font-medium",children:"You've reached your Amazon API usage limit for this month. Upgrade your plan for more credits."})}),!x.etsy&&e.jsx("div",{className:"p-3 bg-amber-50/80 border border-amber-200 rounded-xl",children:e.jsxs("p",{className:"text-xs text-amber-700 font-medium",children:["You've reached your Etsy API usage limit (",E(),") for this month. Upgrade your plan for more credits."]})}),!x.amazon&&!x.etsy&&e.jsx("div",{className:"mt-2",children:e.jsx(t.button,{onClick:c,className:"w-full px-4 py-2 bg-amber-600 text-white text-sm rounded-lg font-medium hover:bg-amber-700 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Upgrade for More API Credits"})})]})]})})]},r.name))})})]}),!i&&e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-amber-50/80 border border-amber-200 rounded-2xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-5 h-5 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-amber-600 text-xs",children:"!"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-800 text-sm font-medium mb-1",children:"Project Limit Reached"}),e.jsxs("p",{className:"text-amber-700 text-xs leading-relaxed",children:["You've reached the limit of ",k.projects," projects for your free plan. Upgrade to Pro for unlimited projects."]})]})]})}),e.jsx(t.div,{whileHover:{scale:i&&l&&!o?1.02:1},whileTap:{scale:i&&l&&!o?.98:1},children:e.jsx(ee,{variant:"secondary",size:"lg",className:`w-full font-medium py-4 rounded-2xl shadow-lg transition-all duration-300 ${i&&l&&!o?"bg-slate-900 text-white hover:shadow-xl hover:bg-slate-800":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,disabled:!l||o||!i,onClick:i?b:c,children:o?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"animate-spin mr-2",size:18}),"Creating Project..."]}):i?e.jsx(e.Fragment,{children:"Generate Product Recommendations"}):e.jsx(e.Fragment,{children:"Upgrade"})})})]})]})},Xe=()=>e.jsxs("div",{className:"relative w-full h-48 bg-gradient-to-br from-violet-100 via-blue-100 to-purple-100 rounded-2xl overflow-hidden flex items-center justify-center",children:[e.jsx(t.div,{className:"absolute inset-0 bg-gradient-to-br from-violet-400/20 via-blue-400/20 to-purple-400/20",animate:{background:["linear-gradient(45deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.2))","linear-gradient(45deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.2), rgba(139, 92, 246, 0.2))","linear-gradient(45deg, rgba(147, 51, 234, 0.2), rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2))"]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),[...Array(8)].map((a,s)=>e.jsx(t.div,{className:`absolute w-3 h-3 rounded-full ${s%3===0?"bg-violet-400/40":s%3===1?"bg-blue-400/40":"bg-purple-400/40"}`,style:{left:`${20+s*10}%`,top:`${30+s%3*20}%`},animate:{y:[0,-20,0],x:[0,10,0],scale:[1,1.2,1],opacity:[.4,.8,.4]},transition:{duration:3+s*.5,repeat:1/0,delay:s*.3,ease:"easeInOut"}},s)),[...Array(6)].map((a,s)=>e.jsx(t.div,{className:"absolute text-yellow-400",style:{left:`${15+s*15}%`,top:`${20+s%2*40}%`},animate:{scale:[0,1,0],rotate:[0,180,360],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:s*.4,ease:"easeInOut"},children:"✨"},`sparkle-${s}`)),e.jsxs(t.div,{className:"relative z-10 text-center",children:[e.jsxs(t.div,{className:"relative inline-block",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[e.jsx(t.div,{className:"absolute inset-0 bg-violet-400/30 rounded-full blur-xl",animate:{scale:[1,1.5,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),e.jsx(t.div,{className:"relative text-6xl",animate:{rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:"🤖"})]}),e.jsxs(t.div,{className:"mt-4 text-slate-700 font-medium",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:[e.jsx("span",{children:"AI Agent Working"}),e.jsx(t.span,{animate:{opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0},children:"..."})]})]})]}),Ge=({projects:a,filteredProjects:s,isLoadingProjects:o,filters:l,editingProjectId:i,editInputRef:y,onSearchChange:p,onClearSearch:d,onStartEditing:n,onProjectNameChange:m,onProjectNameKeyDown:h,onDeleteProject:b,projectsSectionRef:v})=>{const[k,x]=z.useState(null),C={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.22,1,.36,1]}}};return e.jsxs(t.div,{className:"lg:col-span-2",variants:C,ref:v,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-10 gap-6",children:[e.jsxs("h2",{className:"font-light text-3xl text-slate-900",children:["Your ",e.jsx("span",{className:"font-semibold",children:"Projects"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search projects...",value:l.searchQuery,onChange:g=>p(g.target.value),className:"pl-10 pr-4 py-3 border border-slate-300/60 rounded-2xl focus:outline-none focus:ring-2 focus:ring-violet-500/50 focus:border-violet-500 bg-white/60 backdrop-blur-sm transition-all duration-300 text-sm w-64"}),e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),l.searchQuery&&e.jsx(t.button,{onClick:d,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(F,{size:16})})]})})]}),o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-3 text-slate-600",children:[e.jsx(Q,{className:"animate-spin text-violet-600",size:20}),e.jsx("span",{className:"font-medium",children:"Loading projects..."})]})}):e.jsxs("div",{className:`${l.viewMode==="grid"?"grid grid-cols-1 md:grid-cols-2 gap-8":"space-y-6"}`,children:[e.jsx(T,{children:s.map((g,j)=>e.jsxs(t.div,{className:`bg-white/80 backdrop-blur-xl border border-slate-200/60 rounded-3xl overflow-hidden shadow-lg hover:shadow-2xl hover:shadow-slate-900/5 transition-all duration-500 group relative ${l.viewMode==="list"?"flex":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.6,delay:j*.1,ease:"easeOut"},whileHover:{y:-4,scale:l.viewMode==="grid"?1.01:1},onMouseEnter:()=>x(g.id),onMouseLeave:()=>x(null),children:[e.jsx(T,{children:g.status==="analyzing"&&k===g.id&&e.jsx(t.button,{onClick:()=>b(g.id,g.name),className:"absolute top-4 right-4 z-20 w-8 h-8 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg backdrop-blur-sm",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.9},title:"Cancel project creation",transition:{duration:.2},children:e.jsx(L,{size:14})})}),e.jsxs("div",{className:`relative overflow-hidden ${l.viewMode==="list"?"w-48 flex-shrink-0":"h-48"}`,children:[g.status==="analyzing"?e.jsx(Xe,{}):e.jsx(t.img,{src:g.image_url||"/api/placeholder/400/300",alt:g.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsx(t.div,{className:"absolute inset-0 bg-slate-900/70 opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center",initial:!1,children:g.status==="complete"?e.jsxs(t.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2},className:"flex items-center gap-3",children:[e.jsx(ee,{variant:"secondary",size:"sm",className:"bg-white/90 text-slate-900 hover:bg-white font-medium px-6 py-3 rounded-2xl shadow-lg backdrop-blur-sm",onClick:()=>window.location.href=`/curation?project=${g.id}`,children:"View Project"}),e.jsx(t.button,{onClick:()=>b(g.id,g.name),className:"p-3 bg-red-500/90 text-white rounded-2xl hover:bg-red-600 transition-colors shadow-lg backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Y,{size:16})})]}):g.status==="analyzing"?e.jsxs(t.div,{className:"flex items-center space-x-3 text-white",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(Q,{className:"animate-spin",size:20}),e.jsx("span",{className:"font-medium",children:"AI Agent Working..."})]}):e.jsx(t.div,{className:"flex items-center space-x-3 text-red-400",initial:{opacity:0},animate:{opacity:1},children:e.jsx("span",{className:"font-medium",children:"Processing Error"})})})]}),e.jsxs("div",{className:`p-6 ${l.viewMode==="list"?"flex-1":""}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:i===g.id?e.jsx("input",{ref:y,type:"text",defaultValue:g.name,className:"font-semibold text-xl text-slate-900 w-full border-b-2 border-violet-500 focus:outline-none bg-transparent pb-1",onBlur:u=>m(g.id,u.target.value),onKeyDown:u=>h(u,g.id)}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:`font-semibold text-slate-900 ${l.viewMode==="list"?"text-lg":"text-xl"}`,children:g.name}),g.status!=="analyzing"&&e.jsx(t.button,{onClick:()=>n(g.id),className:"p-2 text-slate-400 hover:text-violet-600 hover:bg-violet-50/60 rounded-full transition-all duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(ke,{size:16})})]})}),e.jsxs("div",{className:`flex ${l.viewMode==="list"?"flex-col space-y-2":"justify-between items-center"} text-sm`,children:[e.jsx("span",{className:"text-slate-500 font-medium",children:new Date(g.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),e.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${g.status==="analyzing"?"bg-violet-100/80 text-violet-700":g.status==="complete"?"bg-emerald-100/80 text-emerald-700":"bg-red-100/80 text-red-700"}`,children:g.status==="analyzing"?"AI Agent Working...":g.status==="complete"?"Ready to view":"Error"})]})]})]},g.id))}),s.length===0&&!o&&e.jsxs(t.div,{className:"col-span-2 text-center py-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{ease:"easeOut"},children:[e.jsx("div",{className:"text-slate-400 mb-4",children:l.searchQuery?e.jsx(K,{size:48,className:"mx-auto"}):e.jsx(De,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:l.searchQuery?"No projects found":"Create your first project"}),e.jsx("p",{className:"text-slate-600 font-light",children:l.searchQuery?`No projects match "${l.searchQuery}". Try a different search term.`:"Upload your first image to get started with MDI from both Amazon and Etsy."})]})]})]})},dt=()=>{const a=z.useRef(null),s=z.useRef(null),[o,l]=we.useState({x:0,y:0}),[i,y]=z.useState(null),[p,d]=z.useState(!1),[n,m]=z.useState(!1),{uploadState:h,expandedElements:b,isCreatingProject:v,handleDrop:k,handleFileSelect:x,toggleElement:C,updateSelectedQuery:g,selectAllElements:j,clearImage:u,hasSelectedQueries:c,createNewProject:f}=Oe(),{projects:w,setProjects:P,isLoadingProjects:E,editingProjectId:r,deleteModal:N,editInputRef:A,startEditingProject:S,handleProjectNameChange:$,handleProjectNameKeyDown:H,openDeleteModal:se,closeDeleteModal:ae,confirmDeleteProject:ie}=Le(),{filters:B,filteredProjects:V,updateSearchQuery:re,updateViewMode:le,clearSearch:q}=He(w),{canCreateProject:ne,showSubscriptionModal:oe,maxFreeProjects:ce,handleCreateProjectAttempt:de,closeSubscriptionModal:me,handleDeleteProjectFromModal:ue}=Be(w);z.useEffect(()=>{Z()},[]);const Z=async()=>{try{d(!0);const D=await U.getUserApiUsage();y(D)}catch(D){console.error("Error loading API usage data:",D)}finally{d(!1)}},he=D=>{var X;const I=(X=a.current)==null?void 0:X.getBoundingClientRect();I&&l({x:(D.clientX-I.left-I.width/2)/I.width*10,y:(D.clientY-I.top-I.height/2)/I.height*10})},xe=()=>{de()&&(f(w,P,!0),setTimeout(()=>{var I;(I=s.current)==null||I.scrollIntoView({behavior:"smooth",block:"start"})},50))},pe=()=>{ue()},ge=()=>{m(!0),Z()},fe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},ye={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.8,ease:[.22,1,.36,1]}}};return e.jsxs("div",{ref:a,className:"pt-16 relative overflow-hidden bg-gradient-to-b from-white via-slate-50/30 to-white min-h-screen",onMouseMove:he,children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(t.div,{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-violet-100/40 to-blue-100/40 rounded-full blur-3xl",animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),e.jsx("div",{className:"absolute inset-0 opacity-[0.02]",children:e.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"studio-dots",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("circle",{cx:"20",cy:"20",r:"1",fill:"currentColor"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#studio-dots)",className:"text-slate-600"})]})})]}),e.jsx(Ve,{}),e.jsx(qe,{projectCount:V.length,searchQuery:B.searchQuery,filters:B,apiUsage:i,onClearSearch:q,onViewModeChange:le,onShowApiUsage:ge}),e.jsx(t.div,{className:"max-w-7xl mx-auto px-6 lg:px-8 py-20 relative z-10",variants:fe,initial:"hidden",animate:"visible",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsx(t.div,{className:"lg:col-span-1",variants:ye,children:e.jsx(Ze,{uploadState:h,expandedElements:b,isCreatingProject:v,hasSelectedQueries:c,canCreateProject:ne,onDrop:k,onFileSelect:x,onClearImage:u,onToggleElement:C,onUpdateSelectedQuery:g,onSelectAllElements:j,onCreateProject:xe})}),e.jsx(Ge,{projects:w,filteredProjects:V,isLoadingProjects:E,filters:B,editingProjectId:r,editInputRef:A,onSearchChange:re,onClearSearch:q,onStartEditing:S,onProjectNameChange:$,onProjectNameKeyDown:H,onDeleteProject:se,projectsSectionRef:s})]})}),e.jsx(Re,{isOpen:N.isOpen,onClose:ae,onConfirm:ie,title:"Delete Project",message:`Are you sure you want to delete "${N.projectName}"? This action cannot be undone and will permanently remove the project and all its associated data.`,confirmText:"Delete Project",cancelText:"Cancel",type:"danger",isLoading:N.isDeleting}),e.jsx(Fe,{isOpen:oe,onClose:me,onDeleteProject:pe,projectCount:w.length,maxFreeProjects:ce}),e.jsx(Ye,{isOpen:n,onClose:()=>m(!1),apiUsage:i,isLoading:p})]})};export{dt as default};
